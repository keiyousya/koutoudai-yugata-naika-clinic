---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "勾当台夕方内科クリニック - 仙台市国分町の夕方診療専門クリニック。勾当台公園駅近く、夕方から夜の診療で仕事帰りでも通いやすい内科クリニックです。2026年4月開院予定。" } = Astro.props;

const siteUrl = "https://koutoudai-yugata-naika.clinic";
const ogImage = `${siteUrl}/og-image.png`;

// 構造化データ（JSON-LD）
const structuredData = {
  "@context": "https://schema.org",
  "@type": "MedicalBusiness",
  "@id": siteUrl,
  "name": "勾当台夕方内科クリニック",
  "alternateName": "Koutoudai Yugata Naika Clinic",
  "description": description,
  "url": siteUrl,
  "logo": `${siteUrl}/apple-touch-icon.png`,
  "image": ogImage,
  "medicalSpecialty": "InternalMedicine",
  "address": {
    "@type": "PostalAddress",
    "postalCode": "980-0803",
    "addressLocality": "仙台市青葉区",
    "addressRegion": "宮城県",
    "addressCountry": "JP",
    "streetAddress": "国分町3丁目8-1 勾当台ビル4階"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 38.2682,
    "longitude": 140.8694
  },
  "areaServed": {
    "@type": "City",
    "name": "仙台市"
  },
  "priceRange": "保険診療",
  "currenciesAccepted": "JPY",
  "paymentAccepted": "健康保険",
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "opens": "17:00",
      "closes": "21:00"
    }
  ],
  "sameAs": []
};
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <!-- Canonical URL -->
    <link rel="canonical" href={siteUrl} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={siteUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:locale" content="ja_JP" />
    <meta property="og:site_name" content="勾当台夕方内科クリニック" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={siteUrl} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- Additional SEO -->
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#1e3a5f" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <!-- Preconnect for critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://maps.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://koutoudai-reservation-api.kit-tamtam.workers.dev" crossorigin />
    <link rel="dns-prefetch" href="https://maps.googleapis.com" />

    <!-- Google Fonts - Async load with display=optional -->
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=optional"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=optional"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=optional"
        rel="stylesheet"
      />
    </noscript>

    <title>{title}</title>

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />

    <!-- Critical CSS for above-the-fold content -->
    <style>
      *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
      html{scroll-behavior:smooth}
      body{font-family:"Noto Sans JP",-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Hiragino Sans",Meiryo,sans-serif;line-height:1.7;color:#333;background-color:#fafafa}
      a{color:inherit;text-decoration:none}
      img{max-width:100%;height:auto}
      ul{list-style:none}
      .container{max-width:1100px;margin:0 auto;padding:0 20px}
      .header{position:fixed;top:0;left:0;right:0;background:#fff;box-shadow:0 2px 20px rgba(0,0,0,.08);z-index:1000}
      .header-inner{display:flex;align-items:center;justify-content:space-between;height:70px}
      .logo{display:flex;align-items:center;gap:12px}
      .logo-img{height:44px;width:auto}
      .logo-main{font-size:1.1rem;font-weight:700;color:#1e3a5f;letter-spacing:.05em}
      .nav-list{display:flex;gap:32px}
      .nav-link{font-size:.9rem;font-weight:500;color:#555}
      .menu-toggle{display:none}
      .hero{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;padding-top:70px}
      .hero-bg{position:absolute;inset:0;background:linear-gradient(180deg,#1e3a5f 0%,#2a4a6e 30%,#4a6a8a 50%,#d4886a 75%,#e8a87c 100%);z-index:-2}
      .hero-content{text-align:center;z-index:1}
      .hero-catchphrase{font-size:1.1rem;color:#fff;margin-bottom:16px;font-weight:500;letter-spacing:.1em;text-shadow:0 2px 10px rgba(0,0,0,.2)}
      .hero-title{margin-bottom:16px}
      .hero-title-main{display:block;font-size:2.5rem;font-weight:700;color:#fff;letter-spacing:.08em;line-height:1.3;text-shadow:0 2px 15px rgba(0,0,0,.3)}
      @media(max-width:768px){.logo{gap:8px}.logo-img{height:36px}.logo-main{font-size:.85rem}.nav{position:absolute;top:70px;left:0;right:0;background:#fff;transform:translateY(-20px);opacity:0;visibility:hidden}.nav-list{flex-direction:column;gap:0;padding:16px 0}.menu-toggle{display:flex;flex-direction:column;gap:5px;padding:8px;background:none;border:none;cursor:pointer}.menu-bar{width:24px;height:2px;background:#1e3a5f}.hero{min-height:calc(100vh - 20px);padding:100px 0 60px}.hero-title-main{font-size:1.75rem}}
    </style>
  </head>
  <body>
    <slot />
  </body>
</html>

<style is:global>
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: "Noto Sans JP", -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
    line-height: 1.7;
    color: #333;
    background-color: #fafafa;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  ul {
    list-style: none;
  }

  .container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .section {
    padding: 80px 0;
    scroll-margin-top: 32px;
  }

  .section-title {
    font-size: 1.75rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 48px;
    color: #1e3a5f;
  }

  .section-title::after {
    content: "";
    display: block;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #e67e22, #f5a855);
    margin: 16px auto 0;
    border-radius: 2px;
  }

  @media (max-width: 768px) {
    .section {
      padding: 60px 0;
    }

    .section-title {
      font-size: 1.5rem;
      margin-bottom: 36px;
    }
  }
</style>
